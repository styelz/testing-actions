name: Download Built Artifact
run-name: ${{ github.actor }} is testing out Download Artifact ðŸš€
on:
  workflow_dispatch:

jobs:
  download:
    runs-on: ubuntu-latest
    steps:
    - name: "Download artifact"
      run: |
        OTHER_REPO="styelz/testing-actions"
        WF_NAME="build.yml"
        ARTIFACT_NAME="test_artifact"
        RUN_ID=`gh run --repo ${OTHER_REPO} list --workflow ${WF_NAME} --json databaseId --jq .[0].databaseId`
        gh run --repo ${OTHER_REPO} download ${RUN_ID} -n ${ARTIFACT_NAME}
        ls -lR
      env:
        GITHUB_TOKEN: ${{ secrets.ARTIFACT_DEPLOY_TOKEN }}
