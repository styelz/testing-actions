name: Download Artifact
run-name: ${{ github.actor }} is testing out Download Artifact ðŸš€
on:
  workflow_run:
    workflows: [Upload data]
    types:
      - completed
jobs:
  download:
    runs-on: ubuntu-latest
    steps:
    - name: "Download artifact"
      run: |
        OTHER_REPO="styelz/testing-actions"
        WF_NAME="build.yml"
        ARTIFACT_NAME="artifact_name"
        RUN_ID=`gh run --repo ${OTHER_REPO} list --workflow ${WF_NAME} --json databaseId --jq .[0].databaseId`
        gh run --repo ${OTHER_REPO} download ${RUN_ID} -n ${ARTIFACT_NAME}
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
